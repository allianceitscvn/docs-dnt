---
description: Các hàm xử lý liên quan đến ngôn ngữ
---

# i18n

**Các keys cần dùng**

| Key                 | Ý nghĩa                                             |
| ------------------- | --------------------------------------------------- |
| KLanguage           | language lưu ở local                                |
| KDefaultLang        | config language mặc định ở app config               |
| KVersionLang        | version hiện tại của bộ ngôn ngữ ở app config       |
| KDefaultLangBundles | danh sách các bộ ngôn ngữ chung config ở app config |
| KLocalLangBundles   | các bundles được lưu ở local                        |

**Các functions**

| Function           | Mô tả                                                                                                                                                                                                                                                                                                                                 |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| initI18n           | <p>Khởi tạo bộ ngôn ngữ<br>Nếu có lang và langBundles ở local thì dùng, ngược lại dùng bộ mặc định (en) để khởi tạo</p>                                                                                                                                                                                                               |
| getCurrentLang     | Lấy language lưu ở local                                                                                                                                                                                                                                                                                                              |
| getPlaceholderText | <p>Lấy placeholder cho các control form với cấu trúc loại control + label control<br>Loại gồm có: Select và Enter</p>                                                                                                                                                                                                                 |
| parseLangConfig    | <p>Xử lý LangConfig từ server trả về</p><ul><li>Nếu version 2 bên khác nhau thì gọi updateLanguage</li><li>Ngược lại thì sẽ cập nhật data vào UI và lưu lại localstorage</li></ul>                                                                                                                                                    |
| updateLanguage     | <p>Gửi bộ language "ui" lên server để cập nhật bộ mới ở server</p><ul><li>Server sẽ nhận bộ data và version</li><li>Nếu version ở UI mới hơn thì đi cập nhật và trả về cờ NeedReloadPage = true để ui reload</li><li>Ngược lại sẽ trả về NeedReloadPage = false, ui sẽ không làm gì, sử dụng bộ ngôn ngữ với version của ui</li></ul> |

Đặc điểm:

* Bộ ngôn ngữ sẽ được lưu và có thể clone ra nhiều ngôn ngữ khác nhau ở server
* Thời điểm UI lấy bộ ngôn ngữ từ server:
  * Đối với các bundle được cấu hình ở AppConfig thì sẽ lấy ở FirstSetting
  * Nhữnng bundle còn lại thì sẽ lấy ở api gọi Options ở các màn hình tương ứng
* Cập nhật mới khi version ở UI và server khác nhau ( khi thêm text mới cần đổi version)
